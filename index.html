<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAAAGH! Clicker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial Black', Arial, sans-serif;
            background: linear-gradient(135deg, #2d4a2b 0%, #1a2e1a 100%);
            color: #d4af37;
            min-height: 100vh;
            padding: 20px;
            -webkit-user-select: none; /* Chrome / Safari */
            -moz-user-select: none;    /* Firefox */
            -ms-user-select: none;     /* Edge */
            user-select: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        }

        h1 {
            font-size: 3em;
            color: #ff4444;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            color: #88cc88;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .panel {
            background: rgba(40, 60, 40, 0.9);
            border: 4px solid #666;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.5);
        }

        .panel h2 {
            color: #ff6666;
            border-bottom: 3px solid #666;
            padding-bottom: 10px;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        #clicker-area {
            text-align: center;
        }

        #ork-button {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, #4a7c4a 0%, #2d5a2d 100%);
            border: 6px solid #333;
            border-radius: 50%;
            font-size: 4em;
            cursor: pointer;
            transition: all 0.1s;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(0,0,0,0.6);
            user-select: none;
            -webkit-user-drag: none;
        }

        #ork-button:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 30px rgba(255,68,68,0.4);
        }

        #ork-button:active {
            transform: scale(0.95);
            box-shadow: 0 4px 10px rgba(0,0,0,0.8);
        }

        .resource {
            font-size: 1.5em;
            margin: 10px 0;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
        }

        .resource-value {
            color: #ffcc00;
            font-weight: bold;
        }

        .upgrade, .generator {
            background: rgba(60, 80, 60, 0.8);
            border: 2px solid #555;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upgrade:hover, .generator:hover {
            background: rgba(80, 100, 80, 0.9);
            border-color: #ff6666;
        }

        .upgrade.disabled, .generator.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .upgrade.disabled:hover, .generator.disabled:hover {
            background: rgba(60, 80, 60, 0.8);
            border-color: #555;
        }

        .upgrade-name, .generator-name {
            font-size: 1.2em;
            color: #ffcc00;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .upgrade-desc, .generator-desc {
            font-size: 0.9em;
            color: #aaa;
            margin-bottom: 8px;
        }

        .upgrade-cost, .generator-cost {
            color: #88ff88;
            font-weight: bold;
        }

        .generator-count {
            color: #ff8888;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .stats {
            font-size: 0.9em;
            color: #ccc;
        }

        .stats-item {
            margin: 8px 0;
            padding: 5px;
            background: rgba(0,0,0,0.2);
            border-radius: 3px;
        }

        #prestige-button {
            background: linear-gradient(135deg, #ff6600 0%, #cc3300 100%);
            border: 3px solid #ff8833;
            color: white;
            padding: 15px 30px;
            font-size: 1.3em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            text-transform: uppercase;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
        }

        #prestige-button:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(255,102,0,0.6);
        }

        #prestige-button.disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .floating-number {
            position: absolute;
            font-size: 2em;
            font-weight: bold;
            color: #ffcc00;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            pointer-events: none;
            animation: float-up 1s ease-out forwards;
        }

        @keyframes float-up {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px);
            }
        }

        @media (max-width: 968px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }

        .scrollable {
            max-height: 400px;
            overflow-y: auto;
        }

        .scrollable::-webkit-scrollbar {
            width: 10px;
        }

        .scrollable::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
        }

        .scrollable::-webkit-scrollbar-thumb {
            background: #666;
            border-radius: 5px;
        }

        .scrollable::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üî• WAAAGH! CLICKER üî•</h1>
            <p class="subtitle">B√¢tissez votre WAAAGH! et conqu√©rez la galaxie!</p>
        </header>

        <div class="game-area">
            <!-- Panel de gauche: Stats -->
            <div class="panel">
                <h2>üìä Stats WAAAGH!</h2>
                <div class="stats">
                    <div class="stats-item">
                        <strong>Puissance WAAAGH:</strong><br>
                        <span id="waaagh-power">0</span>
                    </div>
                    <div class="stats-item">
                        <strong>Teef par clic:</strong><br>
                        <span id="click-power">1</span>
                    </div>
                    <div class="stats-item">
                        <strong>Teef par seconde:</strong><br>
                        <span id="teef-per-sec">0</span>
                    </div>
                    <div class="stats-item">
                        <strong>Clics totaux:</strong><br>
                        <span id="total-clicks">0</span>
                    </div>
                    <div class="stats-item">
                        <strong>teef totales:</strong><br>
                        <span id="total-teef">0</span>
                    </div>
                </div>
                <button id="prestige-button" class="disabled">
                    PRESTIGE!<br>
                    <span style="font-size: 0.7em;">N√©cessite 1M teef</span>
                </button>
            </div>

            <!-- Panel central: Clicker -->
            <div class="panel">
                <h2>‚öîÔ∏è Zone de Combat</h2>
                <div id="clicker-area">
                    <div class="resource">
                        ü¶∑ <strong>TEEF:</strong> 
                        <span class="resource-value" id="teef-count">0</span>
                    </div>
                    <button id="ork-button">üíÄ</button>
                    <p style="color: #aaa; font-size: 0.9em;">Cliquez sur le cr√¢ne pour pr√©lever des teef (dents) !</p>
                </div>
            </div>

            <!-- Panel de droite: Am√©liorations -->
            <div class="panel">
                <h2>‚ö° Am√©liorations</h2>
                <div id="upgrades-list" class="scrollable">
                    <!-- Am√©liorations g√©n√©r√©es par JS -->
                </div>
            </div>
        </div>

        <!-- Panel g√©n√©rateurs -->
        <div class="panel">
            <h2>üè≠ G√©n√©rateurs de WAAAGH!</h2>
            <div id="generators-list" class="scrollable">
                <!-- G√©n√©rateurs g√©n√©r√©s par JS -->
            </div>
        </div>
    </div>

    <script>
        let offLineGained = 0;
        
        // √âtat du jeu
        const game = {
            teef: 0,
            totalTeef: 0,
            baseClickPower: 1,      // valeur de base
            clickMultiplier: 1,    // prestige / upgrades globaux
            teefPerSecond: 0,
            totalClicks: 0,
            waaaghPower: 0,
            upgrades: [],
            generators: []
        };

        // D√©finition des am√©liorations
        const upgradeDefinitions = [
            {
                id: 'sharper-teef',
                name: 'ü¶∑ teef Plus Pointues',
                desc: 'Double les teef par clic',
                baseCost: 150,
                effect: () => game.baseClickPower *= 2,
                purchased: 0
            },
            {
                id: 'bigger-choppa',
                name: 'üó°Ô∏è Choppa Plus Gros',
                desc: 'Triple les teef par clic',
                baseCost: 5000,
                effect: () => game.baseClickPower *= 3,
                purchased: 0
            },
            {
                id: 'red-paint',
                name: 'üé® Peinture Rouge',
                desc: 'x5 teef par clic (plus vite!)',
                baseCost: 150000,
                effect: () => game.baseClickPower *= 5,
                purchased: 0
            },
            {
                id: 'mega-armour',
                name: 'üõ°Ô∏è M√©ga-Armure',
                desc: 'x10 teef par clic',
                baseCost: 5000000,
                effect: () => game.baseClickPower *= 10,
                purchased: 0
            },
            {
                id: 'warboss-upgrade',
                name: 'üëë Devenir Warboss',
                desc: 'x20 √† TOUT!',
                baseCost: 999999999,
                effect: () => game.baseClickPower *= 20,
                purchased: 0
            }
        ];

        // D√©finition des g√©n√©rateurs
        const generatorDefinitions = [
            {
                id: 'gretchin',
                name: 'üë∂ Gretchin',
                desc: 'Petit mais utile',
                baseCost: 100,
                baseProduction: 1,
                count: 0
            },
            {
                id: 'ork-boy',
                name: 'üí™ Ork Boy',
                desc: 'Le guerrier de base',
                baseCost: 150,
                baseProduction: 4,
                count: 0
            },
            {
                id: 'nob',
                name: 'üëä Nob',
                desc: 'Plus gros, plus fort',
                baseCost: 1500,
                baseProduction: 10,
                count: 0
            },
            {
                id: 'mek',
                name: 'üîß Mek',
                desc: 'Construit des extracteurs de teefs',
                baseCost: 18000,
                baseProduction: 65,
                count: 0
            },
            {
                id: 'warbuggy',
                name: 'üöó Warbuggy',
                desc: 'Rapide et mortel',
                baseCost: 200000,
                baseProduction: 400,
                count: 0
            },
            {
                id: 'battlewagon',
                name: 'üöõ Battlewagon',
                desc: 'Tank de guerre Ork',
                baseCost: 2500000,
                baseProduction: 2500,
                count: 0
            },
            {
                id: 'stompa',
                name: 'ü§ñ Stompa',
                desc: 'Robot g√©ant de destruction',
                baseCost: 35000000,
                baseProduction: 15000,
                count: 0
            },
            {
                id: 'gargant',
                name: 'üè¢ Gargant',
                desc: 'Titan Ork colossal',
                baseCost: 500000000,
                baseProduction: 90000,
                count: 0
            }
        ];

        function getClickPower() {
            return game.baseClickPower * game.clickMultiplier;
        }

        // Initialiser le jeu
        function init() {
            game.upgrades = upgradeDefinitions.map(u => ({...u}));
            game.generators = generatorDefinitions.map(g => ({...g}));
            
            loadGame();
            renderUpgrades();
            renderGenerators();
            updateUI();
            
            // Boucle de jeu
            setInterval(gameLoop, 100);
            // Sauvegarde automatique
            setInterval(saveGame, 2500);
        }

        // Boucle de jeu principale
        function gameLoop() {
            const deltaTime = 0.1; // 100ms
            
            // Calculer production par seconde
            game.teefPerSecond = 0;
            game.generators.forEach(gen => {
                game.teefPerSecond += gen.baseProduction * gen.count;
            });
            
            // Ajouter les Teef g√©n√©r√©es
            const teefGained = game.teefPerSecond * deltaTime;
            game.teef += teefGained;
            game.totalTeef += teefGained;
            
            updateUI();
        }

        // Clic sur le bouton principal
        document.getElementById('ork-button').addEventListener('click', function(e) {
            const gain = getClickPower();
            game.teef += gain;
            game.totalTeef += gain;
            game.totalClicks++;

            createFloatingNumber(e.clientX, e.clientY, `+${formatNumber(gain)}`);
            updateUI();
        });

        // Cr√©er un nombre flottant anim√©
        function createFloatingNumber(x, y, text) {
            const elem = document.createElement('div');
            elem.className = 'floating-number';
            elem.textContent = text;
            elem.style.left = x + 'px';
            elem.style.top = y + 'px';
            document.body.appendChild(elem);
            
            setTimeout(() => elem.remove(), 1000);
        }

        // Acheter une am√©lioration
        function buyUpgrade(upgradeId) {
            const upgrade = game.upgrades.find(u => u.id === upgradeId);
            if (!upgrade) return;
            
            // Chaque am√©lioration ne peut √™tre achet√©e qu'une seule fois
            if (upgrade.purchased > 0) return;
            
            const cost = upgrade.baseCost;
            
            if (game.teef >= cost) {
                game.teef -= cost;
                upgrade.purchased = 1;
                upgrade.effect();
                renderUpgrades();
                updateUI();
            }
        }

        // Acheter un g√©n√©rateur
        function buyGenerator(generatorId) {
            const generator = game.generators.find(g => g.id === generatorId);
            if (!generator) return;
            
            const cost = Math.floor(generator.baseCost * Math.pow(2.55, generator.count));
            
            if (game.teef >= cost) {
                game.teef -= cost;
                generator.count++;
                renderGenerators();
                updateUI();
            }
        }

        // Prestige
        document.getElementById('prestige-button').addEventListener('click', function() {
            if (game.totalTeef >= 1000000) {
                if (confirm('PRESTIGE! R√©initialiser le jeu pour +1 Puissance WAAAGH (multiplie tout par 2)?\n\nVous perdrez toutes vos teef et g√©n√©rateurs, mais gagnerez un bonus permanent!')) {
                    game.waaaghPower++;
                    game.teef = 0;
                    game.totalTeef = 0;
                    game.totalClicks = 0;

                    // reset clics avec bonus prestige
                    game.baseClickPower = 1;
                    game.clickMultiplier = Math.pow(2, game.waaaghPower);

                    // reset g√©n√©rateurs (PAS boost√©s)
                    game.generators.forEach(g => {
                        g.count = 0;
                        g.baseProduction =
                            generatorDefinitions.find(d => d.id === g.id).baseProduction;
                    });

                    // reset upgrades
                    game.upgrades = upgradeDefinitions.map(u => ({ ...u }));

                    renderUpgrades();
                    renderGenerators();
                    updateUI();
                }
            }
        });

        // Afficher les am√©liorations
        function renderUpgrades() {
            const container = document.getElementById('upgrades-list');
            container.innerHTML = '';
            
            game.upgrades.forEach(upgrade => {
                // Ne pas afficher si d√©j√† achet√©
                if (upgrade.purchased > 0) {
                    const div = document.createElement('div');
                    div.className = 'upgrade disabled';
                    div.style.opacity = '0.6';
                    div.style.cursor = 'default';
                    div.innerHTML = `
                        <div class="upgrade-name">${upgrade.name}</div>
                        <div class="upgrade-desc">${upgrade.desc}</div>
                        <div style="color: #44ff44; font-weight: bold; margin-top: 5px;">‚úì ACHET√â</div>
                    `;
                    container.appendChild(div);
                    return;
                }
                
                const cost = upgrade.baseCost;
                const canAfford = game.teef >= cost;
                
                const div = document.createElement('div');
                div.className = 'upgrade' + (canAfford ? '' : ' disabled');
                div.innerHTML = `
                    <div class="upgrade-name">${upgrade.name}</div>
                    <div class="upgrade-desc">${upgrade.desc}</div>
                    <div class="upgrade-cost">Co√ªt: ${formatNumber(cost)} Teef</div>
                `;
                div.onclick = () => buyUpgrade(upgrade.id);
                container.appendChild(div);
            });
        }

        // Afficher les g√©n√©rateurs
        function renderGenerators() {
            const container = document.getElementById('generators-list');
            container.innerHTML = '';
            
            game.generators.forEach(generator => {
                const cost = Math.floor(generator.baseCost * Math.pow(2.55, generator.count));
                const canAfford = game.teef >= cost;
                
                const div = document.createElement('div');
                div.className = 'generator' + (canAfford ? '' : ' disabled');
                div.innerHTML = `
                    <div class="generator-name">${generator.name}</div>
                    <div class="generator-desc">${generator.desc} - ${formatNumber(generator.baseProduction)} Teef/sec</div>
                    <div class="generator-cost">Co√ªt: ${formatNumber(cost)} Teef</div>
                    <div class="generator-count">Poss√©d√©: ${generator.count}</div>
                `;
                div.onclick = () => buyGenerator(generator.id);
                container.appendChild(div);
            });
        }

        // Mettre √† jour l'interface
        function updateUI() {
            document.getElementById('teef-count').textContent = formatNumber(game.teef);
            document.getElementById('click-power').textContent = formatNumber(getClickPower());
            document.getElementById('teef-per-sec').textContent = formatNumber(game.teefPerSecond);
            document.getElementById('total-clicks').textContent = formatNumber(game.totalClicks);
            document.getElementById('total-teef').textContent = formatNumber(game.totalTeef);
            document.getElementById('waaagh-power').textContent = game.waaaghPower;
            
            // Bouton prestige
            const prestigeBtn = document.getElementById('prestige-button');
            if (game.totalTeef >= 1000000) {
                prestigeBtn.classList.remove('disabled');
            } else {
                prestigeBtn.classList.add('disabled');
            }
            
            updateUpgradesAffordability();
            updateGeneratorsAffordability();
        }
        
        // Mettre √† jour seulement l'√©tat disabled/enabled sans recr√©er les √©l√©ments
        function updateUpgradesAffordability() {
            game.upgrades.forEach((upgrade, index) => {
                // Skip si d√©j√† achet√©
                if (upgrade.purchased > 0) return;
                
                const cost = upgrade.baseCost;
                const canAfford = game.teef >= cost;
                const upgradeElements = document.getElementById('upgrades-list').children;
                if (upgradeElements[index]) {
                    if (canAfford) {
                        upgradeElements[index].classList.remove('disabled');
                    } else {
                        upgradeElements[index].classList.add('disabled');
                    }
                }
            });
        }
        
        function updateGeneratorsAffordability() {
            game.generators.forEach((generator, index) => {
                const cost = Math.floor(generator.baseCost * Math.pow(2.55, generator.count));
                const canAfford = game.teef >= cost;
                const generatorElements = document.getElementById('generators-list').children;
                if (generatorElements[index]) {
                    if (canAfford) {
                        generatorElements[index].classList.remove('disabled');
                    } else {
                        generatorElements[index].classList.add('disabled');
                    }
                }
            });
        }

        // Formater les nombres
        function formatNumber(num) {
            if (num < 10) return num.toFixed(1);
            if (num < 1000) return Math.floor(num).toString();
            if (num < 1000000) return (num / 1000).toFixed(1) + 'K';
            if (num < 1000000000) return (num / 1000000).toFixed(2) + 'M';
            if (num < 1000000000000) return (num / 1000000000).toFixed(2) + 'B';
            return (num / 1000000000000).toFixed(2) + 'T';
        }

        // Sauvegarder le jeu
        function saveGame() {
            localStorage.setItem('orkClicker', JSON.stringify({
                teef: game.teef,
                totalTeef: game.totalTeef,
                baseClickPower: game.baseClickPower,
                clickMultiplier: game.clickMultiplier,
                totalClicks: game.totalClicks,
                waaaghPower: game.waaaghPower,

                upgrades: game.upgrades.map(u => ({
                    id: u.id,
                    purchased: u.purchased
                })),

                generators: game.generators.map(g => ({
                    id: g.id,
                    count: g.count
                })),

                lastSave: Date.now()
            }));
        }
        
        // Charger le jeu
       function loadGame() {
            const saved = localStorage.getItem('orkClicker');
            if (!saved) return;

            const data = JSON.parse(saved);

            // Reset pour √©viter les doubles effets
            game.baseClickPower = 1;

            Object.assign(game, {
                teef: data.teef ?? 0,
                totalTeef: data.totalTeef ?? 0,
                clickMultiplier: data.clickMultiplier ?? 1,
                totalClicks: data.totalClicks ?? 0,
                waaaghPower: data.waaaghPower ?? 0
            });

            // Restaurer upgrades
            game.upgrades = upgradeDefinitions.map(def => {
                const savedUp = data.upgrades?.find(u => u.id === def.id);
                return { ...def, purchased: savedUp?.purchased ?? 0 };
            });

            // Restaurer g√©n√©rateurs
            game.generators = generatorDefinitions.map(def => {
                const savedGen = data.generators?.find(g => g.id === def.id);
                return { ...def, count: savedGen?.count ?? 0 };
            });

            // R√©appliquer les effets d‚Äôupgrade
            game.upgrades.forEach(u => {
                if (u.purchased) u.effect();
            });

            // üî• CALCUL OFFLINE
            offlineGained = 0;

            if (data.lastSave) {
                const now = Date.now();
                const elapsedSeconds = Math.floor((now - data.lastSave) / 1000);

                let productionPerSecond = 0;
                game.generators.forEach(g => {
                    productionPerSecond += g.baseProduction * g.count;
                });

                offlineGained = productionPerSecond * elapsedSeconds;

                game.teef += offlineGained;
                game.totalTeef += offlineGained;
            }
        }


        function showOfflineMessage(amount) {
            const msg = document.createElement('div');
            msg.style.position = 'fixed';
            msg.style.top = '20px';
            msg.style.left = '50%';
            msg.style.transform = 'translateX(-50%)';
            msg.style.background = 'rgba(0,0,0,0.85)';
            msg.style.border = '3px solid #ff6600';
            msg.style.borderRadius = '10px';
            msg.style.padding = '15px 25px';
            msg.style.color = '#ffcc00';
            msg.style.fontSize = '1.1em';
            msg.style.zIndex = '1000';
            msg.style.boxShadow = '0 0 15px rgba(255,102,0,0.8)';
            msg.style.userSelect = 'none';

            msg.innerHTML = `
                üí§ Pendant ton absence,<br>
                les Boyz ont boss√© dur !<br><br>
                <strong><center>+${formatNumber(amount)} Teef</center></strong>
            `;

            document.body.appendChild(msg);

            setTimeout(() => msg.remove(), 4000);
        }

        // D√©marrer le jeu
        init();
        if (offlineGained > 0) {
            showOfflineMessage(offlineGained);
        }
    </script>
</body>
</html>
